


查询子商品的所有规格信息
SELECT `id`,`goods_id`,`key`,`price`,`store_count`,`preferential`,`sku` FROM `db_spec_goods_price` 
WHERE ( goods_id in (3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,
3640,3641,3642,3643,3644,3645,3646,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,
3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3677,
3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688) ) 
ORDER BY SUBSTRING_INDEX("3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,
3639,3640,3641,3642,3643,3644,3645,3646,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,
3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,
3676,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688",goods_id, 1)


获取所有的key 将key以_分隔符提取出来 获取子商品所有的规格项

SHOW COLUMNS FROM `db_goods_spec_item`
show  FULL columns from db_goods_spec_item
SELECT * FROM `db_goods_spec_item` 
WHERE ( id in 
(281,395,406,474,487,492,281,395,404,474,487,492,281,395,402,474,487,492,281,395,
401,474,487,492,281,395,400,474,487,492,281,395,399,474,487,492,281,395,398,474,487,
492,281,286,395,474,487,492,280,395,406,474,487,492,280,395,404,474,487,492,280,395,
402,474,487,492,280,395,401,474,487,492,280,395,400,474,487,492,280,395,399,474,487,
492,280,395,398,474,487,492,280,286,395,474,487,492,281,372,406,474,487,492,281,372,
404,474,487,492,281,372,402,474,487,492,281,372,401,474,487,492,281,372,400,474,487,
492,281,372,399,474,487,492,281,372,398,474,487,492,281,286,372,474,487,492,280,372,
406,474,487,492,280,372,404,474,487,492,280,372,402,474,487,492,280,372,401,474,487,
492,280,372,400,474,487,492,280,372,399,474,487,492,280,372,398,474,487,492,280,286,3
72,474,487,492,281,395,406,473,487,492,281,395,404,473,487,492,281,395,402,473,487,
492,281,395,401,473,487,492,281,395,400,473,487,492,281,395,399,473,487,492,281,395
,398,473,487,492,281,286,395,473,487,492,280,395,406,473,487,492,280,395,404,473,487,
492,280,395,402,473,487,492,280,395,401,473,487,492,280,395,400,473,487,492,280,395,
399,473,487,492,280,395,398,473,487,492,280,286,395,473,487,492,281,372,406,473,487,
492,281,372,404,473,487,492,281,372,402,473,487,492,281,372,401,473,487,492,281,372,
400,473,487,492,281,372,399,473,487,492,281,372,398,473,487,492,281,286,372,473,487,
492,280,372,406,473,487,492,280,372,404,473,487,492,280,372,402,473,487,492,280,372,
401,473,487,492,280,372,400,473,487,492,280,372,399,473,487,492,280,372,398,473,487
,492,280,286,372,473,487,492) )




SELECT * FROM `db_goods_spec` WHERE 
( id in ("41","41","43","44","44","43","43","43",
"43","43","43","43","47","47","48","49") )




SELECT `id`,`attribute_id`,`goods_id`,`attr_value` FROM `db_goods_attr` WHERE ( goods_id = 3624 )
SHOW COLUMNS FROM `db_goods_attribute`
SELECT `id`,`attr_name` FROM `db_goods_attribute` WHERE `id` IN ('16','10')


-- 第一步查询子商品
SELECT `id`,`title`,`brand_id`,`p_id`,`description`,`class_id`,`price_market`,`price_member`,`p_id` 
FROM `db_goods` WHERE ( p_id= 3624 and shelves= 1 )

-- 第二步 将所有的子商品id 连接起来


-- 第三步 根据连接的子商品id 获取所有的规格项key
SELECT `id`,`goods_id`,`key`,`price`,`store_count`,`preferential`,`sku` 
FROM `db_spec_goods_price` 
WHERE ( goods_id in (3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,3643,3644,3645,3646,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688) ) ORDER BY SUBSTRING_INDEX("3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,3643,3644,3645,3646,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688",goods_id, 1)

-- 第四步 连接所有的规格项key 获取子商品所有的规格项id和name和规格类别spec_id
SELECT * FROM `db_goods_spec_item` WHERE ( id in (281,395,406,474,487,492,281,395,404,474,487,492,281,395,402,474,487,492,281,395,401,474,487,492,281,395,400,474,487,492,281,395,399,474,487,492,281,395,398,474,487,492,281,286,395,474,487,492,280,395,406,474,487,492,280,395,404,474,487,492,280,395,402,474,487,492,280,395,401,474,487,492,280,395,400,474,487,492,280,395,399,474,487,492,280,395,398,474,487,492,280,286,395,474,487,492,281,372,406,474,487,492,281,372,404,474,487,492,281,372,402,474,487,492,281,372,401,474,487,492,281,372,400,474,487,492,281,372,399,474,487,492,281,372,398,474,487,492,281,286,372,474,487,492,280,372,406,474,487,492,280,372,404,474,487,492,280,372,402,474,487,492,280,372,401,474,487,492,280,372,400,474,487,492,280,372,399,474,487,492,280,372,398,474,487,492,280,286,372,474,487,492,281,395,406,473,487,492,281,395,404,473,487,492,281,395,402,473,487,492,281,395,401,473,487,492,281,395,400,473,487,492,281,395,399,473,487,492,281,395,398,473,487,492,281,286,395,473,487,492,280,395,406,473,487,492,280,395,404,473,487,492,280,395,402,473,487,492,280,395,401,473,487,492,280,395,400,473,487,492,280,395,399,473,487,492,280,395,398,473,487,492,280,286,395,473,487,492,281,372,406,473,487,492,281,372,404,473,487,492,281,372,402,473,487,492,281,372,401,473,487,492,281,372,400,473,487,492,281,372,399,473,487,492,281,372,398,473,487,492,281,286,372,473,487,492,280,372,406,473,487,492,280,372,404,473,487,492,280,372,402,473,487,492,280,372,401,473,487,492,280,372,400,473,487,492,280,372,399,473,487,492,280,372,398,473,487,492,280,286,372,473,487,492) )

-- 第五步 连接所有的规格类别spec_id 查询所有的规格类别信息
SELECT * FROM `db_goods_spec` WHERE ( id in ("41","41","43","44","44","43","43","43","43","43","43","43","47","47","48","49") )

-- 第六步 将规格项和规格类别进行重组